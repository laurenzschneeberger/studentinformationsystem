@page
@model StudentInformationSystem.Pages.Students.IndexModel
@{
    ViewData["Title"] = "Students";
}

<style>
    /* Consistent styling with homepage */
    .page-header {
        background: linear-gradient(135deg, #f5f7fa 0%, #e4edf9 100%);
        border-radius: 15px;
        padding: 2.5rem 2rem;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    }

    .page-header::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.03'%3E%3Cpath opacity='.5' d='M96 95h4v1h-4v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4h-9v4h-1v-4H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15v-9H0v-1h15V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h9V0h1v15h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9h4v1h-4v9zm-1 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm9-10v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-10 0v-9h-9v9h9zm-9-10h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9zm10 0h9v-9h-9v9z'/%3E%3Cpath d='M6 5V0H5v5H0v1h5v94h1V6h94V5H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .page-title {
        font-size: 2.5rem;
        color: #2c3e50;
        margin-bottom: 0.5rem;
        font-weight: 700;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.05);
    }

    .page-subtitle {
        font-size: 1.2rem;
        color: #34495e;
        font-weight: 300;
        max-width: 600px;
    }

    .floating-shapes {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 0;
        overflow: hidden;
        pointer-events: none;
    }

    .shape {
        position: absolute;
        background: rgba(52, 152, 219, 0.1);
        border-radius: 50%;
    }

    .shape-1 {
        width: 60px;
        height: 60px;
        top: 20%;
        right: 10%;
        animation: float 8s ease-in-out infinite;
    }

    .shape-2 {
        width: 40px;
        height: 40px;
        bottom: 20%;
        right: 30%;
        animation: float 9s ease-in-out infinite 1s;
    }

    /* Enhance cards */
    .student-card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        overflow: hidden;
        margin-bottom: 1.5rem;
    }

    .student-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.12);
    }

    .card-header {
        background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        padding: 1.25rem 1.5rem;
    }

    .card-header h4 {
        margin: 0;
        font-weight: 600;
        color: #2c3e50;
        font-size: 1.4rem;
    }

    .diagnostic-card .card-header {
        background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
    }

    /* Table styling */
    .student-table {
        border-collapse: separate;
        border-spacing: 0;
    }

    .student-table thead th {
        background-color: #f8f9fa;
        color: #2c3e50;
        font-weight: 600;
        border-top: none;
        padding: 1rem;
    }

    .student-table tbody tr {
        transition: background-color 0.2s ease;
    }

    .student-table tbody tr:hover {
        background-color: #f8f9fa;
    }

    .student-table td {
        padding: 0.75rem 1rem;
        vertical-align: middle;
    }

    /* Button styling */
    .btn {
        border-radius: 8px;
        padding: 0.5rem 1.25rem;
        font-weight: 500;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        font-size: 0.95rem;
    }

    .btn::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 5px;
        height: 5px;
        background: rgba(255, 255, 255, 0.5);
        opacity: 0;
        border-radius: 100%;
        transform: scale(1, 1) translate(-50%, -50%);
        transform-origin: 50% 50%;
    }

    .btn:focus:not(:active)::after {
        animation: ripple 1s ease-out;
    }

    .btn-primary {
        background: #3498db;
        border-color: #3498db;
    }

    .btn-primary:hover,
    .btn-primary:focus {
        background: #2980b9;
        border-color: #2980b9;
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
    }

    .btn-success {
        background: #2ecc71;
        border-color: #2ecc71;
    }

    .btn-success:hover,
    .btn-success:focus {
        background: #27ae60;
        border-color: #27ae60;
        box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
    }

    .btn-danger {
        background: #e74c3c;
        border-color: #e74c3c;
    }

    .btn-danger:hover,
    .btn-danger:focus {
        background: #c0392b;
        border-color: #c0392b;
        box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
    }

    .btn-secondary {
        background: #95a5a6;
        border-color: #95a5a6;
    }

    .btn-secondary:hover,
    .btn-secondary:focus {
        background: #7f8c8d;
        border-color: #7f8c8d;
        box-shadow: 0 5px 15px rgba(149, 165, 166, 0.3);
    }

    .btn-sm {
        padding: 0.25rem 0.75rem;
        font-size: 0.85rem;
    }

    .btn-outline-info {
        color: #3498db;
        border-color: #3498db;
    }

    .btn-outline-info:hover {
        background-color: #3498db;
        border-color: #3498db;
        box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
    }

    /* Form styling */
    .form-control {
        border-radius: 8px;
        padding: 0.6rem 1rem;
        border: 1px solid #dfe6e9;
        transition: all 0.3s ease;
    }

    .form-control:focus {
        border-color: #3498db;
        box-shadow: 0 0 0 0.2rem rgba(52, 152, 219, 0.25);
    }

    label {
        color: #34495e;
        font-weight: 500;
        margin-bottom: 0.5rem;
    }

    /* Alert styling */
    .alert {
        border-radius: 10px;
        border: none;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    .alert-success {
        background-color: #d4edda;
        color: #155724;
    }

    .alert-danger {
        background-color: #f8d7da;
        color: #721c24;
    }

    .alert-warning {
        background-color: #fff3cd;
        color: #856404;
    }

    .alert-info {
        background-color: #d1ecf1;
        color: #0c5460;
    }

    /* Animation */
    @@keyframes float {
        0% {
            transform: translateY(0) rotate(0deg);
        }

        50% {
            transform: translateY(-20px) rotate(10deg);
        }

        100% {
            transform: translateY(0) rotate(0deg);
        }
    }

        @@keyframes ripple {
        0% {
            transform: scale(0, 0);
            opacity: 1;
        }

        20% {
            transform: scale(25, 25);
            opacity: 1;
        }

        100% {
            opacity: 0;
            transform: scale(40, 40);
        }
    }

    .empty-state {
        text-align: center;
        padding: 2rem;
    }

    .empty-state-icon {
        font-size: 3rem;
        color: #95a5a6;
        margin-bottom: 1rem;
    }

    /* Diagnostic results styling */
    pre.diagnostic-results {
        background-color: #2c3e50;
        color: #ecf0f1;
        border-radius: 10px;
        padding: 1.5rem;
        font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        font-size: 0.85rem;
        line-height: 1.6;
    }
</style>

<div class="container">
    <!-- Page Header -->
    <section class="page-header position-relative mb-5">
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
        </div>
        <div class="position-relative">
            <h1 class="page-title">Student Management</h1>
            <p class="page-subtitle">Manage student information with ease. Add, edit, or remove students from your
                institution's database.</p>

            <div class="mt-4">
                <a asp-page-handler="TestConnection" class="btn btn-outline-info">
                    <i class="bi bi-bug"></i> Run Connection Diagnostic
                </a>
            </div>
        </div>
    </section>

    <!-- Status and Error Messages -->
    @if (!string.IsNullOrEmpty(Model.StatusMessage))
        {
        var statusClass = Model.StatusMessage.StartsWith("Error:") ? "danger" : "success";
    <div class="alert alert-@statusClass alert-dismissible fade show" role="alert">
        <div class="d-flex align-items-center">
            @if (statusClass == "success")
            {
                <i class="bi bi-check-circle-fill me-2"></i>
            }
            else
            {
                <i class="bi bi-exclamation-triangle-fill me-2"></i>
            }
            @Model.StatusMessage
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
        }

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            <h5><i class="bi bi-exclamation-triangle-fill me-2"></i> Database Connection Issue</h5>
            <p>@Model.ErrorMessage</p>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    }

    @if (!string.IsNullOrEmpty(Model.DiagnosticResults))
    {
        <div class="student-card diagnostic-card mb-4">
            <div class="card-header bg-info text-white">
                <h4><i class="bi bi-speedometer me-2"></i> Connection Diagnostic Results</h4>
            </div>
            <div class="card-body">
                <pre class="diagnostic-results" style="max-height: 300px; overflow-y: auto;">@Model.DiagnosticResults</pre>
            </div>
        </div>
    }

    <!-- Student Form Card -->
    <div class="student-card mb-4">
        <div class="card-header">
            <h4>
                @if (Model.EditingStudent != null)
                {
                    <i class="bi bi-pencil-square me-2"></i>

                    @:Edit Student
                }
                else
                {
                    <i class="bi bi-person-plus me-2"></i>

                    @:Add New Student
                }
            </h4>
        </div>
        <div class="card-body">
            @if (!ModelState.IsValid)
            {
                <div class="alert alert-danger">
                    <ul class="mb-0">
                        @foreach (var modelState in ModelState.Values)
                        {
                            foreach (var error in modelState.Errors)
                            {
                                <li>@error.ErrorMessage</li>
                            }
                        }
                    </ul>
                </div>
            }

            <form method="post">
                @if (Model.EditingStudent != null)
                {
                    <input type="hidden" asp-for="EditingStudent.Id" />
                    <div class="row g-3">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label asp-for="EditingStudent.FirstName">First Name</label>
                                <input asp-for="EditingStudent.FirstName" class="form-control" required />
                                <span asp-validation-for="EditingStudent.FirstName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label asp-for="EditingStudent.LastName">Last Name</label>
                                <input asp-for="EditingStudent.LastName" class="form-control" required />
                                <span asp-validation-for="EditingStudent.LastName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label asp-for="EditingStudent.Email">Email</label>
                                <input asp-for="EditingStudent.Email" class="form-control" required type="email" />
                                <span asp-validation-for="EditingStudent.Email" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label asp-for="EditingStudent.EnrollmentDate">Enrollment Date</label>
                                <input asp-for="EditingStudent.EnrollmentDate" class="form-control" required type="date" />
                                <span asp-validation-for="EditingStudent.EnrollmentDate" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <div class="row g-3">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label asp-for="NewStudent.FirstName">First Name</label>
                                <input asp-for="NewStudent.FirstName" class="form-control" required />
                                <span asp-validation-for="NewStudent.FirstName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label asp-for="NewStudent.LastName">Last Name</label>
                                <input asp-for="NewStudent.LastName" class="form-control" required />
                                <span asp-validation-for="NewStudent.LastName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label asp-for="NewStudent.Email">Email</label>
                                <input asp-for="NewStudent.Email" class="form-control" required type="email" />
                                <span asp-validation-for="NewStudent.Email" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label asp-for="NewStudent.EnrollmentDate">Enrollment Date</label>
                                <input asp-for="NewStudent.EnrollmentDate" class="form-control" required type="date"
                                    value="@DateTime.Today.ToString("yyyy-MM-dd")" />
                                <span asp-validation-for="NewStudent.EnrollmentDate" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                }
                <div class="mt-4 d-flex gap-2">
                    <button type="submit" asp-page-handler="Add" class="btn btn-primary" title="Add New Student">
                        <i class="bi bi-plus-circle me-1"></i> Add
                    </button>
                    <button type="submit" asp-page-handler="Update" class="btn btn-success"
                        disabled="@(Model.EditingStudent == null)" title="Update Selected Student">
                        <i class="bi bi-check-circle me-1"></i> Update
                    </button>
                    <button type="submit" asp-page-handler="Delete" class="btn btn-danger"
                        disabled="@(Model.EditingStudent == null)" title="Delete Selected Student"
                        onclick="return confirm('Are you sure you want to delete this student? This action cannot be undone.')">
                        <i class="bi bi-trash me-1"></i> Delete
                    </button>
                    <button type="submit" asp-page-handler="Clear" class="btn btn-secondary" title="Clear Form">
                        <i class="bi bi-x-circle me-1"></i> Clear
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Student List Card -->
    <div class="student-card">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h4><i class="bi bi-people me-2"></i> Student List</h4>
            <span class="badge bg-primary rounded-pill">@Model.Students.Count Students</span>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                @if (Model.Students.Count > 0)
                {
                    <table class="table student-table table-hover">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>First Name</th>
                                <th>Last Name</th>
                                <th>Email</th>
                                <th>Enrollment Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var student in Model.Students)
                            {
                                <tr>
                                    <td>@student.Id</td>
                                    <td>@student.FirstName</td>
                                    <td>@student.LastName</td>
                                    <td>@student.Email</td>
                                    <td>@student.EnrollmentDate.ToShortDateString()</td>
                                    <td>
                                        <form method="post" class="d-inline">
                                            <input type="hidden" name="id" value="@student.Id" />
                                            <button type="submit" asp-page-handler="Select" class="btn btn-sm btn-primary"
                                                title="Select Student to Edit">
                                                <i class="bi bi-pencil"></i> Select
                                            </button>
                                        </form>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
                else
                {
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <i class="bi bi-person-dash"></i>
                        </div>
                        <h5>No Students Found</h5>
                        <p class="text-muted">There are no students in the database. You can add a new student using the
                            form above.</p>
                        <p class="small text-muted">If you believe this is an error, check the application logs for more
                            details.</p>
                    </div>
                }
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}